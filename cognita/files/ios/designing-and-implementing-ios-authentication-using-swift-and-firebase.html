<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Designing and implementing iOS authentication using Swift and Firebase</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../index.js"></script>
</head>
<body>
    <header>
        <nav class="corporate-nav">
            <div class="nav-container">
                <div class="title-header">
                    <h1 class="title">Designing and implementing iOS authentication using Swift and Firebase</h1>
                    <p class="subtitle">Designing and implementing iOS authentication using Swift and Firebase involves integrating Firebase Authentication into your iOS app, allowing users to log in via email/password, Google, Apple, or other providers.</p>
                </div>        
            </div>
        </nav>
    </header>

    <main>
        <section>
            <h2>‚úÖ Overview of Steps</h2>
            <ol>
                <li>Set Up Firebase Project</li>
                <li>Integrate Firebase SDK into Xcode Project</li>
                <li>Enable Authentication Methods in Firebase</li>
                <li>Design UI in Swift (Login/Register Screens)</li>
                <li>Implement Authentication Logic in Swift</li>
                <li>Handle Login State and Redirects</li>
            </ol>
        </section>

        <section>
            <h2>üîß Step-by-Step Guide</h2>
            <ol>
                <li>
                    Set Up Firebase Project
                    <ul>
                        <li>Go to <a href="https://console.firebase.google.com/?utm_source=chatgpt.com">Firebase Console</a></li>
                        <li>Click "Add Project"</li>
                        <li>Follow the setup wizard</li>
                        <li>
                            Add an iOS App to the project
                            <ol>
                                <li>Enter your app‚Äôs Bundle Identifier</li>
                                <li>Download the GoogleService-Info.plist file</li>
                            </ol>
                        </li>
                    </ul>
                </li>

                <li>
                    2. Integrate Firebase SDK
                    <p>In Xcode:</p>
                    <ol>
                        <li>Drag the downloaded GoogleService-Info.plist file into your project.</li>
                        <li>Initialize Firebase in your App Delegate or SwiftUI App file.</li>
                    </ol>
                    <p>Add Firebase SDK via Swift Package Manager:</p>
                    <p>Go to:</p>
                    <pre><code>
File ‚Üí Add Packages
                    </code></pre>
                    <p>Use this URL:</p>
                    <pre><code>
https://github.com/firebase/firebase-ios-sdk
                    </code></pre>

                    <p>Add these Firebase packages:</p>
                    <ul>
                        <li>FirebaseAuth</li>
                        <li>(Optional: FirebaseCore, FirebaseFirestore, etc.)</li>
                    </ul>
                </li>

                <li>
                    Initialize Firebase in Code:
                    <p>For UIKit ‚Äì in AppDelegate.swift:</p>
                    <pre><code>
import Firebase

func application(_ application: UIApplication,
                 didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    FirebaseApp.configure()
    return true
}
                    </code></pre>
                </li>

                <li>
                    For SwiftUI (iOS 14+):
                    <pre><code>
import SwiftUI
import Firebase

@main
struct YourApp: App {
    init() {
        FirebaseApp.configure()
    }

    var body: some Scene {
        WindowGroup {
            ContentView()
        }
    }
}
                    </code></pre>
                </li>

                <li>
                    Enable Firebase Auth Methods
                    <p>Go to Firebase Console ‚Üí Authentication ‚Üí Sign-in method</p>
                    <ul>
                        <li>
                            Enable:
                            <ul>
                                <li>Email/Password</li>
                                <li>(Optional) Google, Apple, etc.</li>
                            </ul>
                        </li>
                    </ul>
                </li>

                <li>
                    Design UI in Swift
                    <p>Create basic login and register screens.</p>
                    <p>Example UI with SwiftUI:</p>
                    <pre><code>
struct LoginView: View {
    @State private var email = ""
    @State private var password = ""
    @State private var error = ""

    var body: some View {
        VStack(spacing: 20) {
            TextField("Email", text: $email)
                .autocapitalization(.none)
                .textFieldStyle(.roundedBorder)

            SecureField("Password", text: $password)
                .textFieldStyle(.roundedBorder)

            Button("Login") {
                loginUser()
            }

            Text(error).foregroundColor(.red)
        }
        .padding()
    }

    func loginUser() {
        Auth.auth().signIn(withEmail: email, password: password) { result, err in
            if let err = err {
                error = "Login failed: \(err.localizedDescription)"
            } else {
                error = "Login successful!"
                // Redirect or update UI
            }
        }
    }
}                        
                    </code></pre>
                </li>
                <li>
                    Firebase Authentication Logic
                    <p>Register User:</p>
                    <pre><code>
Auth.auth().createUser(withEmail: email, password: password) { result, error in
    if let error = error {
        print("Registration error: \(error.localizedDescription)")
    } else {
        print("User registered: \(result?.user.email ?? "")")
    }
}                        
                    </code></pre>
                </li>
                <p>Login User:</p>
                <pre><code>
Auth.auth().signIn(withEmail: email, password: password) { result, error in
    if let error = error {
        print("Login error: \(error.localizedDescription)")
    } else {
        print("User logged in: \(result?.user.email ?? "")")
    }
}                    
                </code></pre>

                <p>Logout User:</p>
                <pre><code>
do {
    try Auth.auth().signOut()
} catch let signOutError as NSError {
    print("Error signing out: %@", signOutError)
}                    
                </code></pre>

                <p>Check Current User:</p>
                <pre><code>
if let user = Auth.auth().currentUser {
    print("User is logged in: \(user.email ?? "")")
}                    
                </code></pre>
            </ol>
            <li>
                Handle Authentication State
                <p>Listen for Auth Changes:</p>
                <pre><code>
Auth.auth().addStateDidChangeListener { auth, user in
    if let user = user {
        print("User is signed in: \(user.email ?? "")")
    } else {
        print("User is signed out.")
    }
}                    
                </code></pre>
            </li>
        </section>

        <section>
            <h2>‚úÖ Summary</h2>
            <table>
                <thead>
                    <tr>
                        <th>Task</th>
                        <th>Complete?</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Firebase Project Setup</td>
                        <td>‚úÖ</td>
                    </tr>
                    <tr>
                        <td>SDK Integration</td>
                        <td>‚úÖ</td>
                    </tr>
                    <tr>
                        <td>Auth UI & Logic</td>
                        <td>‚úÖ</td>
                    </tr>
                    <tr>
                        <td>Login/Register Functionality</td>
                        <td>‚úÖ</td>
                    </tr>
                    <tr>
                        <td>Handle Auth State</td>
                        <td>‚úÖ</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <p>Designing and implementing authentication for a secure iOS banking app using Swift and Firebase requires a much higher level of security than standard apps. You must account for financial-grade security, compliance requirements (e.g., PCI DSS), and potential regulatory approvals (like PSD2 in the EU or FFIEC in the US).</p>
            <p>Firebase provides a great starting point for authentication, but a real banking app would typically go beyond Firebase‚Äîyou can use Firebase Auth for prototyping or MVPs, but custom backend validation and enhanced security measures are needed for production.</p>
        </section>

        <section>
            <h2>üîê Secure iOS Banking App Authentication ‚Äì High-Level Plan</h2>
            <p>‚úÖ Key Security Requirements</p>
            <table>
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Techniques</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Authentication</td>
                        <td>Firebase Auth (2FA), biometric auth, MFA</td>
                    </tr>
                    <tr>
                        <td>Secure Networking</td>
                        <td>SSL pinning, HTTPS, OAuth2</td>
                    </tr>
                    <tr>
                        <td>Data Protection</td>
                        <td>Keychain storage, no sensitive data in UserDefaults</td>
                    </tr>
                    <tr>
                        <td>Device Integrity</td>
                        <td>Jailbreak detection, DeviceCheck / App Attest</td>
                    </tr>
                    <tr>
                        <td>Session Management</td>
                        <td>Token refresh, inactivity logout</td>
                    </tr>
                    <tr>
                        <td>Regulatory Compliance</td>
                        <td>PCI DSS, GDPR, FFIEC, etc.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>üîê Step 2: Add Biometric Authentication (Touch ID / Face ID)</h2>
            <p>Use LocalAuthentication framework.</p>
            <pre><code>
import LocalAuthentication

func authenticateWithBiometrics(completion: @escaping (Bool, Error?) -> Void) {
    let context = LAContext()
    var error: NSError?

    if context.canEvaluatePolicy(.deviceOwnerAuthenticationWithBiometrics, error: &error) {
        context.evaluatePolicy(.deviceOwnerAuthenticationWithBiometrics,
                               localizedReason: "Access your banking account") { success, authError in
            DispatchQueue.main.async {
                completion(success, authError)
            }
        }
    } else {
        completion(false, error)
    }
}
            </code></pre>
            <p>üîÅ After login, prompt the user to enable biometric login, and save a session token in the Keychain.</p>
        </section>

        <section>
            <h2>üîê Step 3: Use iOS Keychain for Token Storage</h2>
            <pre><code>
import Security

func saveToKeychain(_ token: String, for key: String) {
    let data = token.data(using: .utf8)!
    let query = [
        kSecClass: kSecClassGenericPassword,
        kSecAttrAccount: key,
        kSecValueData: data
    ] as CFDictionary

    SecItemDelete(query)
    SecItemAdd(query, nil)
}

func readFromKeychain(for key: String) -> String? {
    let query = [
        kSecClass: kSecClassGenericPassword,
        kSecAttrAccount: key,
        kSecReturnData: kCFBooleanTrue!,
        kSecMatchLimit: kSecMatchLimitOne
    ] as CFDictionary

    var dataTypeRef: AnyObject? = nil
    let status = SecItemCopyMatching(query, &dataTypeRef)

    if status == errSecSuccess {
        if let data = dataTypeRef as? Data,
           let token = String(data: data, encoding: .utf8) {
            return token
        }
    }
    return nil
}
            </code></pre>
        </section>

        <section>
            <h2>üîê Step 4: Enable Firebase Multi-Factor Authentication (MFA)</h2>
            <p>‚úÖ Requirements:</p>
            <ul>
                <li>MFA must be enabled via the Firebase Console</li>
                <li>
                    Typically uses SMS or Email for the second factor
                    <pre><code>
let user = Auth.auth().currentUser
let resolver = MultiFactorResolver() // obtained from sign-in error
let phoneAuthProvider = PhoneAuthProvider.provider()

phoneAuthProvider.verifyPhoneNumber(phoneNumber, uiDelegate: nil) { verificationID, error in
    // Proceed to verify with the code
}
                    </code></pre>
                    MFA setup can get complex and may require a custom UI.
                </li>
            </ul>
        </section>

        <section>
            <h2>üîê Step 5: Jailbreak Detection (Basic)</h2>
            <p>You can detect basic signs of a jailbroken device:</p>
            <pre><code>
func isJailbroken() -> Bool {
    let paths = ["/Applications/Cydia.app",
                    "/Library/MobileSubstrate/MobileSubstrate.dylib",
                    "/bin/bash",
                    "/usr/sbin/sshd",
                    "/etc/apt"]
    
    for path in paths {
        if FileManager.default.fileExists(atPath: path) {
            return true
        }
    }

    if canOpen(path: "/private/jailbreak.txt") {
        return true
    }

    return false
}

func canOpen(path: String) -> Bool {
    do {
        try "test".write(toFile: path, atomically: true, encoding: .utf8)
        try FileManager.default.removeItem(atPath: path)
        return true
    } catch {
        return false
    }
}                
            </code></pre>
        </section>

        <section>
            <h2>üîê Step 6: App Attest + DeviceCheck</h2>
            <p>Firebase integrates with App Attest (iOS 14+), ensuring the app isn't running on a simulator or tampered device.</p>
            <p>Steps:</p>
            <ul>
                <li>Go to Firebase Console ‚Üí App Check</li>
                <li>Enable App Check ‚Üí App Attest (for iOS)</li>
                <li>Install Firebase App Check SDK</li>
            </ul>
            <pre><code>
import FirebaseAppCheck

AppCheck.setAppCheckProviderFactory(AppAttestProviderFactory())
            </code></pre>

            <p>Ensures your API and Firebase services reject requests from tampered clients.</p>
        </section>

        <section>
            <h2>üîê Step 7: Use HTTPS + SSL Pinning (Advanced)</h2>
            <p>Implement SSL pinning to prevent MITM attacks using libraries like Alamofire + TrustKit or custom URLSessionDelegate.</p>
        </section>

        <section>
            <h2>‚ö†Ô∏è Step 8: Do NOT Store Sensitive Info in UserDefaults</h2>
            <p>Use Keychain for:</p>
            <ul>
                <li>Access tokens</li>
                <li>Refresh tokens</li>
                <li>Biometric preference</li>
            </ul>
        </section>

        <section>
            <h2>üîí Step 9: Inactivity Logout</h2>
            <p>Use a timer to log out inactive users (e.g., 2 minutes):</p>

            <pre><code>
class SessionManager {
    private var timer: Timer?

    func resetTimer() {
        timer?.invalidate()
        timer = Timer.scheduledTimer(withTimeInterval: 120, repeats: false) { _ in
            self.logout()
        }
    }

    func logout() {
        try? Auth.auth().signOut()
        // Redirect to login
    }
}                
            </code></pre>
        </section>

        <section>
            <h2>‚úÖ Summary of Tools & Techniques</h2>
            <table>
                <thead>
                    <tr>
                        <th>Security Layer</th>
                        <th>Tool / API</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Auth</td>
                        <td>Firebase Auth + MFA</td>
                    </tr>
                    <tr>
                        <td>Biometric Login</td>
                        <td>LocalAuthentication</td>
                    </tr>
                    <tr>
                        <td>Token Storage</td>
                        <td>iOS Keychain</td>
                    </tr>
                    <tr>
                        <td>Device Integrity</td>
                        <td>App Attest + Jailbreak checks</td>
                    </tr>
                    <tr>
                        <td>Secure Networking</td>
                        <td>SSL Pinning, HTTPS</td>
                    </tr>
                    <tr>
                        <td>Session Security</td>
                        <td>Auto logout, session tokens</td>
                    </tr>
                    <tr>
                        <td>Compliance Ready</td>
                        <td>GDPR, PCI-DSS (backend required)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>üß† Final Note</h2>
            <p>Firebase is excellent for prototypes, MVPs, or internal apps, but a real-world production banking app should:</p>
            <ul>
                <li>Use a custom backend for authentication</li>
                <li>Implement OAuth2, JWT, or OpenID Connect</li>
                <li>Possibly integrate with financial identity providers (e.g., Plaid, Yodlee, bank APIs)</li>
                <li>Be subject to penetration testing and security audits</li>
            </ul>
        </section>
    </main>

    <footer>
        <p class="copyright">
            &copy; <span id="year"></span> Aether Corp. All rights reserved.
        </p>
    </footer>
</body>
</html>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Aether Cognita</title>
  <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
  <link rel="stylesheet" href="cognita.css" />
</head>

<body>
  <div class="container">
    <div class="header">
      <img src="../assets/aether-logo.png" alt="Aether Logo" />
      <h1>Aether Cognita</h1>
    </div>

    <input type="text" id="search" placeholder="Search Aether Cognita..." />

    <label>
      <input type="checkbox" id="groupToggle" />
      Group by category
    </label>

    <main>
      <ul id="page-list"></ul>
    </main>
  </div>

  <script>
    // Dynamically get base path (e.g., '/cognita/' or '/' for localhost)
    const pathParts = window.location.pathname.split('/');
    const repoName = pathParts[1] || '';
    const isGitHubPages = window.location.hostname.includes('github.io');
    const basePath = isGitHubPages ? `/${repoName}/cognita/` : './';

    // Files relative to basePath
    const htmlFiles = [
      "files/aws/aws-lambda.html",
      "files/aws/aws-usage.html",
      "files/aws/aws-lambda-is-a-serverless-compute-service-provided-by-amazon-web-services.html",
      "files/aws/aws-lambda-to-api-gateway.html",
      "files/aws/create-an-aws-account.html",
      "files/aws/create-HTML-template-using-bash-script.html",
      "files/aws/aws-lambda-project-using-nodejs-from-scratch.html",
      "files/aws/firuser-firebase-authentication-sdk.html",  
      "files/aws/what-is-AWS.html",
      "files/deployment/github-pages.html",
      "files/deployment/google-sign-in-on-github-pages.html",
      "files/deployment/website-deployment.html",
      "files/firebase/firebase-cloud-messaging.html",
      "files/firebase/firebase-firestore.html",
      "files/firebase/firebase-project.html",
      "files/firebase/firebase.html",
      "files/firebase/firebase-authentication.html",
      "files/firebase/google-analytics.html",
      "files/firebase/using-firestore-to-manage-user-data-securely.html",
      "files/ios/apple-push-notification-service.html",
      "files/ios/apps-lifecycle-management.html",
      "files/ios/authviewmodel-observableobject.html",
      "files/ios/cordinator-pattern-mvvm-based-authentication-flow.html",
      "files/ios/dependency-injection.html",
      "files/ios/designing-a-viewmodel-in-swift-ios.html",
      "files/ios/designing-and-implementing-ios-authentication-using-swift-and-firebase.html",
      "files/ios/firebase-authentication-basic-setup.html",
      "files/ios/google-signin-swift-ios.html",
      "files/ios/google-signin-with-firebase-in-an-ios-app.html",
      "files/ios/handling-server-trust.html",
      "files/ios/high-order-functions.html",
      "files/ios/identifiable-protocol.html",
      "files/ios/implement-SSL-pinning-in-iOS.html",
      "files/ios/result-type.html",
      "files/ios/retain-cycle-swift.html",
      "files/ios/swift-interview-questions.html",
      "files/ios/type-erasure.html",
      "files/ios/unit-testing-in-xcode.html",
      "files/ios/URLSessionDelegate.html",
      "files/ios/user-notifications.html",
      "files/nodejs/development-and-production-environments-in-a-nodejs-project.html",
      "files/nodejs/env-file.html",
      "files/nodejs/exports-routesConfig-nodejs.html",
      "files/nodejs/introduction-to-nodejs.html",
      "files/nodejs/javascript-template-string-literal.html",
      "files/nodejs/modern-javaScript-features-(ES6-and-beyond).html",
      "files/nodejs/modules-in-javascript.html",
      "files/nodejs/nodejs-exports.html",
      "files/nodejs/npm-init.html",
      "files/aws/serverless-yml-file.html",
      "files/nodejs/package-dependencies.html",
      "files/react-native/axios.html",
      "files/react-native/basic-storybook-react-project.html",
      "files/react-native/creating-a-reusable-react-component.html",
      "files/react-native/dist-folder.html",
      "files/react-native/history-of-javaScript.html",
      "files/react-native/react-native-app-using-firebase-cloud-messaging.html",
      "files/react-native/react-native.html",
      "files/react-native/mongodb.html",
      "files/react-native/setup-and-use-storybook-in-a-react-project.html",
      "files/react-native/web-build-tools.html",
      "files/react-native/webpack-configuration-file.html",
      "files/react-native/webpack-loader.html",
      "files/react-native/what-is-tailwind-css.html",
      "files/react-native/utility-first-css-framework.html",
    ];

    const htmlFilesWithBase = htmlFiles.map(file => basePath + file);

    htmlFilesWithBase.sort((a, b) => {
      const nameA = a.split("/").pop().toLowerCase();
      const nameB = b.split("/").pop().toLowerCase();
      return nameA.localeCompare(nameB);
    });

    const searchInput = document.getElementById('search');
    const groupToggle = document.getElementById('groupToggle');
    const listElement = document.getElementById('page-list');

    function getDisplayName(filename) {
      const cleanName = filename.replace('.html', '');
      const words = cleanName.split('-');
      const capitalizedWords = words.map(word =>
        word.charAt(0).toUpperCase() + word.slice(1)
      );
      return capitalizedWords.join(' ');
    }

    function groupFiles(files) {
      const grouped = {};
      files.forEach(file => {
        const parts = file.replace(basePath, '').split('/');
        const folder = parts[1]; // e.g., 'aws', 'ios', 'deployment', 'react-native', etc.
        if (!grouped[folder]) grouped[folder] = [];
        grouped[folder].push(file);
      });
      return grouped;
    }

    function displayList(files, grouped) {
      listElement.innerHTML = '';

      if (grouped) {
        const groupedFiles = groupFiles(files);
        for (const [folder, fileList] of Object.entries(groupedFiles)) {
          const section = document.createElement('section');
          const heading = document.createElement('h2');
          heading.textContent = folder.charAt(0).toUpperCase() + folder.slice(1);
          section.appendChild(heading);

          const ul = document.createElement('ul');
          fileList.forEach(file => {
            const li = document.createElement('li');
            const link = document.createElement('a');
            link.href = file;
            link.textContent = getDisplayName(file.split('/').pop());
            li.appendChild(link);
            ul.appendChild(li);
          });

          section.appendChild(ul);
          listElement.appendChild(section);
        }
      } else {
        files.forEach(file => {
          const li = document.createElement('li');
          const link = document.createElement('a');
          link.href = file;
          link.textContent = getDisplayName(file.split('/').pop());
          li.appendChild(link);
          listElement.appendChild(li);
        });
      }

      if (files.length === 0) {
        listElement.innerHTML = '<li>No results found.</li>';
      }
    }

    // Initial render
    displayList(htmlFilesWithBase, groupToggle.checked);

    // Search input event
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.toLowerCase();
      const filtered = htmlFilesWithBase.filter(file => file.toLowerCase().includes(query));
      displayList(filtered, groupToggle.checked);
    });

    // Group toggle event
    groupToggle.addEventListener('change', () => {
      const query = searchInput.value.toLowerCase();
      const filtered = htmlFilesWithBase.filter(file => file.toLowerCase().includes(query));
      displayList(filtered, groupToggle.checked);
    });
  </script>
</body>

</html>
